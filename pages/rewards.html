<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ödüller - HI NIKO</title>
  <link rel="stylesheet" href="../src/css/style.css">
  <link rel="stylesheet" href="../src/css/responsive.css">
</head>

<body>
  <header>
    <nav class="navbar">
      <div class="logo">HI NIKO</div>
      <button class="hamburger-menu" id="hamburgerMenu" aria-label="Menü">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <ul class="nav-links" id="navLinks">
        <li><a href="../src/index.html">Ana Sayfa</a></li>
        <li><a href="notes.html">Notlar</a></li>
        <li><a href="rewards.html" class="active">Ödüller</a></li>
        <li><a href="menu.html">Menü</a></li>
        <li><a href="student.html">Öğrenci</a></li>
        <li><a href="profile.html">Profil</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="rewards-section">
      <div class="container">
        <h1>Ödüllerim</h1>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-number" id="totalCoffees">0</div>
            <div class="stat-label">Toplam Giriş Yaptığı Kahve</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="rewardCoffees">0</div>
            <div class="stat-label">Kazanılan Ödül Kahve Sayısı</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="currentProgress">0</div>
            <div class="stat-label">Mevcut İlerleme (Bir Sonraki Ödüle)</div>
          </div>
        </div>

        <div class="rewards-list">
          <h2>Bir Sonraki Ödüle Doğru</h2>
          <div class="reward-item" id="nextReward">
            <span class="reward-icon">☕</span>
            <div class="reward-info">
              <h3>Bedava Kahve</h3>
              <p>Her 5 kahve sonrası kazanılır</p>
              <div class="reward-progress">
                <div class="progress-bar" id="rewardProgressBar" style="width: 0%"></div>
              </div>
              <p class="progress-text" id="rewardProgressText">0/5 kahve</p>
            </div>
          </div>
        </div>

        <div class="rewards-history">
          <h2>Ödül Geçmişi</h2>
          <div id="historyList">
            <p style="text-align: center; color: #666;">Henüz ödül kazanılmadı</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 HI NIKO. Tüm hakları saklıdır.</p>
  </footer>

  <script src="../src/js/main.js"></script>
  <script>
    // LocalStorage'dan kahve verilerini al
    function loadRewardsData() {
      const totalCoffees = parseInt(localStorage.getItem('totalCoffees') || '0');
      const rewardCoffees = parseInt(localStorage.getItem('rewardCoffees') || '0');
      const currentProgress = totalCoffees % 5; // 5'e bölümünden kalan

      // İstatistikleri güncelle
      document.getElementById('totalCoffees').textContent = totalCoffees;
      document.getElementById('rewardCoffees').textContent = rewardCoffees;
      document.getElementById('currentProgress').textContent = currentProgress;

      // İlerleme çubuğunu güncelle
      const progressPercent = (currentProgress / 5) * 100;
      document.getElementById('rewardProgressBar').style.width = progressPercent + '%';
      document.getElementById('rewardProgressText').textContent = `${currentProgress}/5 kahve`;

      // Ödül geçmişini yükle
      loadRewardHistory();
    }

    function loadRewardHistory() {
      const history = JSON.parse(localStorage.getItem('rewardHistory') || '[]');
      const historyList = document.getElementById('historyList');

      if (history.length === 0) {
        historyList.innerHTML = '<p style="text-align: center; color: #666;">Henüz ödül kazanılmadı</p>';
        return;
      }

      historyList.innerHTML = history.map(item => `
        <div class="history-item">
          <div class="history-date">${item.date}</div>
          <div class="history-content">
            <p>${item.message}</p>
          </div>
        </div>
      `).join('');
    }

    // Sayfa yüklendiğinde verileri yükle
    window.addEventListener('load', loadRewardsData);

    // LocalStorage değişikliklerini dinle (diğer sekmelerden güncellemeler için)
    window.addEventListener('storage', loadRewardsData);
  </script>
</body>

</html>